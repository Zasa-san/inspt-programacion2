<nav xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org"
  th:fragment="navbar" class="navbar is-primary" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" th:href="@{/}">
        <img src="/img/logo.png" alt="KFC Logo" class="kfc-logo">
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarMenu" class="navbar-menu">
      <div class="navbar-start">
        <!-- Links para usuarios anónimos -->
        <th:block sec:authorize="isAnonymous()">
          <a class="navbar-item" th:href="@{/}">Inicio</a>
          <a class="navbar-item" th:href="@{/#productos}">Productos</a>
        </th:block>

        <!-- Links para ADMIN -->
        <th:block sec:authorize="hasRole('ADMIN')">
          <a class="navbar-item" th:href="@{/}">Inicio</a>
          <a class="navbar-item" th:href="@{/products}">Productos</a>
          <a class="navbar-item" th:href="@{/users}">Usuarios</a>
          <a class="navbar-item" th:href="@{/stock}">Stock</a>
        </th:block>

        <!-- Links para SOPORTE -->
        <th:block sec:authorize="hasRole('SOPORTE')">
          <a class="navbar-item" th:href="@{/}">Inicio</a>
          <a class="navbar-item" th:href="@{/products}">Productos</a>
          <a class="navbar-item" th:href="@{/stock}">Stock</a>
        </th:block>

        <!-- Links para VENDEDOR -->
        <th:block sec:authorize="hasRole('VENDEDOR')">
          <a class="navbar-item" th:href="@{/}">Inicio</a>
          <a class="navbar-item" th:href="@{/pedidos}">Pedidos</a>
        </th:block>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <div class="control">
            <button id="darkModeToggle" class="button" type="button" aria-pressed="false">
              <span class="icon">
                <i class="fa-solid fa-lightbulb"></i>
              </span>
            </button>
          </div>
        </div>

        <div class="navbar-item">
          <div class="buttons">
            <div sec:authorize="isAnonymous()">
              <a class="button is-light" th:href="@{/login}">Iniciar sesión</a>
            </div>
            <div sec:authorize="isAuthenticated()">
              <form id="logoutForm" th:action="@{/logout}" method="post" style="display:inline">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="button is-light">Cerrar sesión</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>