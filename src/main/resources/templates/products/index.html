<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/head :: head}"></head>

<body>
  <header th:replace="~{fragments/navbar :: navbar}"></header>

  <section class="section">
    <div class="container">
      <h1 class="title" th:text="${page.title}">Productos</h1>
      <p class="subtitle" th:text="${page.description}">Administración de productos</p>

      <div th:if="${successMessage != null}" class="notification is-success" th:text="${successMessage}"></div>
      <div th:if="${errorMessage != null}" class="notification is-danger" th:text="${errorMessage}"></div>

      <div class="mb-4">
        <a class="button is-primary" th:href="@{/products/new}">Nuevo producto</a>
      </div>

      <div th:if="${#lists.isEmpty(products)}">
        <p>No hay productos cargados.</p>
      </div>

      <div th:if="${!#lists.isEmpty(products)}">
        <table class="table is-fullwidth is-striped is-hoverable">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Descripción</th>
              <th class="has-text-right">Precio (centavos)</th>
              <th>Imagen</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="p : ${products}">
              <td th:text="${p.name}">Nombre</td>
              <td th:text="${p.description}">Descripción</td>
              <td class="has-text-right" th:text="${p.price}">0</td>
              <td>
                <span th:if="${p.imgUrl != null}">
                  <img th:src="@{${p.imgUrl}}" alt="img" style="height:48px;" />
                </span>
                <span th:if="${p.imgUrl == null}">-</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</body>

</html>